(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b89e662c"],{"2ce2":function(t,e,a){},5664:function(t,e,a){"use strict";a("2ce2")},c98b:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("h2",[t._v("Чаты")]),t._l(t.chats,(function(t){return a("chat-card",{key:"chat-card-"+t.id,attrs:{chat:t}})}))],2)},r=[],c=a("1da1"),n=(a("96cf"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.chat?a("v-card",{staticClass:"chat-card",on:{click:t.openChatPage}},[a("div",{staticClass:"d-flex"},[a("v-img",{staticClass:"avatar",attrs:{"max-width":"64","max-height":"64",src:t.otherPersonAvatar}}),a("div",[a("h4",{staticClass:"mb-2"},[t._v(t._s(t.otherPersonName))]),a("div",{staticClass:"d-flex"},[a("p",{staticClass:"chat-message"},[t._v(t._s(t.lastMessage))]),t.userType===t.chat.ChatMessages[0].author||t.chat.ChatMessages[0].isSeen?t._e():a("v-icon",{staticClass:"read-mark",attrs:{color:"primary"}},[t._v("mdi-circle-medium")])],1)])],1)]):t._e()}),i=[],h=(a("99af"),a("b0c0"),{props:{chat:{type:Object,required:!0}},methods:{avatar:function(t){return t?"".concat(this.$api.BASE_URL).concat(t):a("113c")},openChatPage:function(){this.$router.push("/chat/".concat(this.chat.id))}},computed:{otherPersonName:function(){return this.$store.getters.userData.id===this.chat.User.id?this.chat.SellerProfile.name:this.chat.User.name},otherPersonAvatar:function(){return this.$store.getters.userData.id===this.chat.User.id?this.avatar(this.chat.SellerProfile.avatar):this.avatar(this.chat.User.avatar)},lastMessage:function(){return this.chat.ChatMessages.length?this.userType===this.chat.ChatMessages[0].author?"Вы: ".concat(this.chat.ChatMessages[0].text):"".concat(this.otherPersonName,": ").concat(this.chat.ChatMessages[0].text):"В этом чате ещё нет сообщений"},userType:function(){return this.$store.getters.userData.id===this.chat.User.id?"customer":"seller"}}}),o=h,u=(a("5664"),a("2877")),l=a("6544"),d=a.n(l),f=a("b0af"),m=a("132d"),p=a("adda"),v=Object(u["a"])(o,n,i,!1,null,"d3d7e2c6",null),g=v.exports;d()(v,{VCard:f["a"],VIcon:m["a"],VImg:p["a"]});var C={components:{ChatCard:g},data:function(){return{chats:[]}},methods:{getUserChats:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$callWithErrorHandler(Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.getUserChats();case 2:t.chats=e.sent.data;case 3:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})))()}},beforeMount:function(){this.getUserChats()}},_=C,b=a("a523"),w=Object(u["a"])(_,s,r,!1,null,null,null);e["default"]=w.exports;d()(w,{VContainer:b["a"]})}}]);
//# sourceMappingURL=chunk-b89e662c.e9fba27a.js.map